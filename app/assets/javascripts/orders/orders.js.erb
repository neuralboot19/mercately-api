function getAjax(url, success) {
  var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
  xhr.open('GET', url);
  xhr.onreadystatechange = function() {
    if (xhr.readyState>3 && xhr.status==200) success(xhr.responseText);
  };
  xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
  xhr.send();
  return xhr;
}

function editPrice(input) {
  var currentInput = $(input).val();
  var fixedInput = currentInput.replace(/[A-Za-z!@#$%^&*()]/g, '');
  fixedInput = fixedInput.replace(',', '.');
  $(input).val(fixedInput);
}

function getProductInfo(input) {
  productId = input.value;

  getAjax(`${window.location.origin}/retailers/products/${productId}/price_quantity`, function(data) {
    var json = JSON.parse(data);

    priceInputId = input.id.replace("_product_id", "_unit_price");
    priceInput = document.getElementById(priceInputId);
    priceInput.value = json['price'];

    quantityInputId = input.id.replace("_product_id", "_quantity");
    quantityInput = document.getElementById(quantityInputId);
    quantityInput.setAttribute("max", `${json['quantity']}`);
  });
}
