<div class="container-fluid reduced-container-padding mb-16">
  <div class="card">
    <div class="container-fluid order">
      <div class="row">
        <div class="col-xs-12 col-md-6">
          <h1 class="d-inline name">Equipo de asignación</h1>
        </div>
        <div class="col-xs-12 col-md-6 t-right button-sm-and-down">
          <div class="mt-8">
            <%= link_to retailers_team_assignments_path(current_retailer), class: 'btn btn--cta' do %>
              <i class="fas fa-arrow-left mr-5"></i>
              Volver
            <% end %>
            <%= link_to edit_retailers_team_assignment_path(current_retailer, @team_assignment), class: 'btn btn--cta' do %>
              <i class="fas fa-edit mr-5"></i>
              Editar
            <% end %>
            <%= link_to retailers_team_assignment_path(current_retailer, @team_assignment), method: :delete, data: { confirm: 'Estás seguro de eliminar el equipo?' }, class: 'btn btn--destroy' do %>
              <i class="far fa-trash-alt mr-5"></i>
              Eliminar
            <% end %>
          </div>
        </div>
      </div>
    </div>
    <div class="container-fluid products">
      <div class="row">
        <div class="col-xs-12">
          <fieldset class="fieldset mt-16">
            <legend>Información del equipo</legend>
            <div class="row box mt-25">
              <div class="col-xs-12 col-sm-6">
                <label class="c-grey fs-14">Nombre:</label> <span class="c-secondary fs-14"><%= @team_assignment.name %></span>
              </div>
              <div class="col-xs-12 col-sm-6">
                <label class="c-grey fs-14">Asignación activa?:</label> <span class="c-secondary fs-14"><%= @team_assignment.active_assignment ? 'Activa' : 'Inactiva' %></span>
              </div>
            </div>
            <div class="row box mt-20">
              <div class="col-xs-12 col-sm-6">
                <label class="c-grey fs-14">Asignación por defecto activa?:</label> <span class="c-secondary fs-14"><%= @team_assignment.default_assignment ? 'Activa' : 'Inactiva' %></span>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <% if @team_assignment.agent_teams.present? %>
        <div class="row">
          <div class="col-xs-12">
            <fieldset class="fieldset mt-30">
              <legend>Miembros del Equipo</legend>
              <div class="row">
                <div class="col-xs-12">
                  <div class="table box">
                    <div class="table__header row hide-on-tablet-and-down center-sm">
                      <div class="col-sm-4">Agente</div>
                      <div class="col-sm-3">Asignaciones máximas</div>
                      <div class="col-sm-3">Conversaciones asignadas</div>
                      <div class="col-sm-2">Estado</div>
                    </div>
                    <% @team_assignment.agent_teams.each do |at| %>
                      <div class="divider"></div>
                      <div class="table__item row middle-xs">
                        <div class="col-xs-4 col-sm-4 t-center c-grey">
                          <div class="truncate">
                            <%= at.retailer_user.full_name.presence || at.retailer_user.email %>
                          </div>
                        </div>
                        <div class="col-xs-2 col-sm-3 t-center">
                          <%= at.max_assignments %>
                        </div>
                        <div class="col-xs-2 col-sm-3 t-center">
                          <%= at.assigned_amount %>
                        </div>
                        <div class="col-xs-4 col-sm-2 t-center">
                          <%= at.active ? 'Activo' : 'Inactivo' %>
                        </div>
                      </div>
                    <% end %>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
